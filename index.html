<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
    <title>LoanCalc Pro ‚Äî Final</title>
    <link href="https://fonts.googleapis.com/css2?family=Bai+Jamjuree:wght@400;600&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />
</head>

<body>
    <!-- üîù Header -->
    <header class="topbar">
        <h1>üí∞ LoanCalc Pro</h1>
        <div class="toolbar search-bar">
            <input type="text" id="searchInput" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ö‡∏≠‡∏£‡πå..." />
        </div>

        <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ ‡πÉ‡∏´‡∏ç‡πà ‡∏ä‡∏±‡∏î ‡∏ö‡∏ô‡∏™‡∏∏‡∏î‡πÄ‡∏™‡∏°‡∏≠ -->
        <div class="toolbar action-bar">
            <button id="btnAddCustomer" class="primary-big">+‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà</button>
        </div>
    </header>

    <!-- üìã ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ -->
    <main id="customerList" class="customer-list"></main>

    <!-- ===========================
       Templates
       =========================== -->

    <!-- üß± ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ + ‡∏´‡∏•‡∏≤‡∏¢‡∏ö‡∏¥‡∏• -->
    <template id="customerCardTpl">
        <div class="customer-card">
            <div class="card-main">
                <div class="left">
                    <h3 class="cust-name">-</h3>
                    <p class="cust-phone small">-</p>
                </div>
                <div class="right stats">
                    <div>‡∏£‡∏ß‡∏°‡∏ö‡∏¥‡∏•: <strong class="loan-count">-</strong></div>
                    <div>‡∏ï‡πâ‡∏ô‡∏£‡∏ß‡∏°: <strong class="principal-sum">-</strong></div>
                    <div class="muted">‡∏î‡∏≠‡∏Å (10%): <strong class="interest-sum">-</strong></div>
                </div>
            </div>

            <div class="card-expand hidden">
                <div class="loans-wrap" data-role="loans"></div>

                <div class="cust-actions">
                    <button class="small-btn warn" data-role="add-loan">+ ‡∏Å‡∏π‡πâ‡πÉ‡∏´‡∏°‡πà (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏¥‡∏•)</button>
                    <button class="small-btn danger" data-role="delete-customer">üóëÔ∏è ‡∏•‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</button>
                </div>
            </div>
        </div>
    </template>

    <!-- üßæ ‡∏ö‡∏¥‡∏•‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß -->
    <template id="loanItemTpl">
        <div class="loan-card" data-loan-id="">
            <div class="loan-header">
                <span class="loan-title"></span>
                <span class="badge start"></span>
                <!--<span class="badge rate"></span>-->
                <span class="badge principal"></span>
                <span class="badge interest"></span>
            </div>
            <div class="loan-actions">
                <button class="small-btn success" data-role="pay">üíµ ‡∏à‡πà‡∏≤‡∏¢‡∏á‡∏ß‡∏î</button>
                <button class="small-btn info" data-role="topup">‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πâ‡∏ô (‡∏Å‡∏π‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°)</button>
                <button class="small-btn" data-role="history">üìú ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</button>
                <button class="small-btn danger" data-role="delete-loan">üóëÔ∏è ‡∏•‡∏ö‡∏ö‡∏¥‡∏•‡∏ô‡∏µ‡πâ</button>
            </div>
            <div class="loan-mini-history" data-role="mini-history"></div>
        </div>
    </template>

    <!-- ===========================
       Dialogs
       =========================== -->

    <!-- üí¨ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ -->
    <div id="customerDialog" class="dialog hidden">
        <div class="dialog-box">
            <h3>‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà</h3>
            <label>‡∏ä‡∏∑‡πà‡∏≠</label><input type="text" id="custName" />
            <label>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£ (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)</label><input type="text" id="custPhone" />
            <label>‡∏¢‡∏≠‡∏î‡∏Å‡∏π‡πâ (‡∏ö‡∏≤‡∏ó)</label><input type="number" id="custAmount" />
            <label>‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢ (% ‡∏ï‡πà‡∏≠‡∏£‡∏≠‡∏ö)</label><input type="number" id="custRate" value="10" />
            <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏π‡πâ</label><input type="date" id="custStartDate" />
            <div class="dialog-buttons">
                <button id="customerSave" class="primary">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                <button id="customerCancel" class="secondary">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
            </div>
        </div>
    </div>

    <!-- üí¨ ‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô -->
    <div id="paymentDialog" class="dialog hidden">
        <div class="dialog-box">
            <h3>üíµ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏à‡πà‡∏≤‡∏¢</h3>
            <p class="small">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: <b id="payCustName">-</b></p>
            <p class="small">‡∏ï‡πâ‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠: <b id="payPrincipalRemain">-</b></p>
            <p class="small">‡∏î‡∏≠‡∏Å (10% ‡∏Ç‡∏≠‡∏á‡∏ï‡πâ‡∏ô): <b id="payInterestDue">-</b></p>
            <label>‡∏à‡πà‡∏≤‡∏¢‡∏î‡∏≠‡∏Å (‡∏ö‡∏≤‡∏ó)</label><input type="number" id="payInterest" />
            <label>‡∏à‡πà‡∏≤‡∏¢‡∏ï‡πâ‡∏ô (‡∏ö‡∏≤‡∏ó)</label><input type="number" id="payPrincipal" />
            <div class="dialog-buttons">
                <button id="paymentSave" class="primary">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                <button id="paymentCancel" class="secondary">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
            </div>
        </div>
    </div>

    <!-- üí¨ ‡∏Å‡∏π‡πâ‡πÉ‡∏´‡∏°‡πà (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏¥‡∏•‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏î‡∏¥‡∏°) -->
    <div id="loanDialog" class="dialog hidden">
        <div class="dialog-box">
            <h3>‚ûï ‡∏Å‡∏π‡πâ‡πÉ‡∏´‡∏°‡πà (‡∏ö‡∏¥‡∏•‡πÉ‡∏´‡∏°‡πà‡∏Ç‡∏≠‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏î‡∏¥‡∏°)</h3>
            <p class="small">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: <b id="loanDlgCustName">-</b></p>

            <label>‡∏¢‡∏≠‡∏î‡∏Å‡∏π‡πâ (‡∏ö‡∏≤‡∏ó)</label>
            <input type="number" id="loanDlgAmount" />

            <label>‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢ (% ‡∏ï‡πà‡∏≠‡∏£‡∏≠‡∏ö)</label>
            <input type="number" id="loanDlgRate" value="10" />

            <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏π‡πâ</label>
            <input type="date" id="loanDlgStart" />

            <div class="dialog-buttons">
                <button id="loanDlgSave" class="primary">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                <button id="loanDlgCancel" class="secondary">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
            </div>
        </div>
    </div>


    <!-- üí¨ Top-up ‡∏ï‡πâ‡∏ô (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πâ‡∏ô‡πÉ‡∏ô‡∏á‡∏ß‡∏î‡πÄ‡∏î‡∏¥‡∏°) -->
    <div id="topupDialog" class="dialog hidden">
        <div class="dialog-box">
            <h3>‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πâ‡∏ô (Top-up)</h3>
            <p class="small">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: <b id="topupCustName">-</b></p>
            <p class="small">‡∏ï‡πâ‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: <b id="topupCurrentPrincipal">-</b></p>
            <label>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (‡∏ö‡∏≤‡∏ó)</label><input type="number" id="topupAmount" />
            <div class="dialog-buttons">
                <button id="topupSave" class="primary">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                <button id="topupCancel" class="secondary">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
            </div>
        </div>
    </div>

    <!-- üí¨ ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥ -->
    <div id="historyDialog" class="dialog hidden">
        <div class="dialog-box">
            <h3>üìú ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏à‡πà‡∏≤‡∏¢</h3>
            <div id="historyWrap"></div>
            <div class="dialog-buttons">
                <button id="historyClose" class="secondary">‡∏õ‡∏¥‡∏î</button>
            </div>
        </div>
    </div>

    <!-- üí¨ ‡∏™‡∏£‡∏∏‡∏õ -->
   <div id="summaryDialog" class="dialog">
  <div class="dialog-box">
    <h3>üìà ‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≥‡πÑ‡∏£‡∏ï‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤</h3>

    <div class="summary-range">
      <label>‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà</label>
      <input type="date" id="sumStart">
      <label>‡∏ñ‡∏∂‡∏á</label>
      <input type="date" id="sumEnd">
 
    </div>

    <div class="summary-box">
      <p><strong>‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:</strong> <span id="sumCustomers">-</span></p>
      <p><strong>‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏Å‡∏π‡πâ‡∏£‡∏ß‡∏°:</strong> ‡∏ø<span id="sumPrincipal">-</span></p>
      <p><strong>‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô:</strong> ‡∏ø<span id="sumPrincipalPaid">-</span></p>
      <p><strong>‡∏î‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö:</strong> ‡∏ø<span id="sumInterestPaid">-</span></p>
      <p><strong>üíπ ‡∏Å‡∏≥‡πÑ‡∏£‡∏ä‡πà‡∏ß‡∏á‡∏ô‡∏µ‡πâ:</strong> ‡∏ø<span id="sumProfit">-</span></p>
    </div>

    <div class="dialog-buttons">
      <button id="btnCloseSummary" class="secondary">‡∏õ‡∏¥‡∏î</button>
    </div>
  </div>
</div>

    <!-- üí¨ Confirm Dialog -->
<div id="confirmDialog" class="dialog hidden">
  <div class="dialog-box">
    <h3 id="confirmTitle">‚ö†Ô∏è ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</h3>
    <p id="confirmMessage">‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ?</p>
    <div class="dialog-buttons">
      <button id="confirmYes" class="danger">‡∏ï‡∏Å‡∏•‡∏á</button>
      <button id="confirmNo" class="secondary">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
    </div>
  </div>
</div>


    <!-- üß± Toast -->
    <div id="toastWrap"></div>

    <!-- ===========================
       Scripts (‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ defer ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á timing)
       =========================== -->
    <script src="js/storage.js"></script>
    <script src="js/logic.js"></script>
    <script src="js/render.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/app.js"></script>
</body>

</html>